import 'package:flutter_gen/gen_l10n/app_localizations.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:platonic/domains/flat_repository/src/models/models.dart';
import 'package:platonic/domains/http_repository/models/error_app_model.dart';
import 'package:platonic/providers/error_provider/create_flat/step3_error_provider.dart';
import 'package:platonic/providers/flat_provider/providers.dart';
import 'package:platonic/screens/create_flat_screen/step2_screen/widgets/widgets.dart';
import 'package:flutter/material.dart';

/* Group floor
    Autogenerated by FlutLab FTF Generator
  */
class AmenityFloorInput extends ConsumerWidget {
  const AmenityFloorInput({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final flatCreateState = ref.read(flatCreateProvider);

    void onSaved(String? floor) {
      ref.read(flatCreateProvider.notifier).setFloor(floor: int.parse(floor!));
    }

    return Container(
      height: 70.0,
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(10.0),
      ),
      child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
        SizedBox(
          height: 26.0,
          child: CreateFlatDetailSubtitle(
            subtitle: AppLocalizations.of(context)!.step3FloorTitle,
          ),
        ),
        const SizedBox(
          height: 14.0,
        ),
        SizedBox(
          height: 30.0,
          child: TextFormField(
            initialValue: flatCreateState.floor != FlatModel.emptyFlat.floor
                ? (flatCreateState.floor).toString()
                : null,
            validator: (String? value) {
              if (value == null || value.isEmpty) {
                ref.read(step3ErrorProvider.notifier).state =
                    const ErrorApp(code: 'step3floor');
                return 'Please enter a floor number';
              }

              int? floor = int.tryParse(value);

              if (floor == null || floor < 0) {
                ref.read(step3ErrorProvider.notifier).state =
                    const ErrorApp(code: 'step3floornegative');

                return 'Please enter a valid floor number';
              }

              return null;
            },
            onSaved: onSaved,
            textInputAction: TextInputAction.next,
            textAlignVertical: TextAlignVertical.center,
            keyboardType: TextInputType.number,
            maxLines: 1,
            maxLength: 1,
            style: const TextStyle(
                height: 1.1530000141688757,
                fontSize: 14.0,
                fontFamily: 'Gilroy',
                fontWeight: FontWeight.w300,
                color: Color.fromARGB(255, 255, 255, 255)),
            decoration: InputDecoration(
              hintText: '''1''',
              hintStyle: TextStyle(color: Colors.grey[400]),
              counterText: "",
              errorStyle: const TextStyle(fontSize: 0.01),
              contentPadding: const EdgeInsets.symmetric(
                horizontal: 10.0,
              ),
              enabledBorder: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(10.0),
                  borderSide: const BorderSide(
                      color: Color.fromARGB(255, 43, 45, 46), width: 1.0)),
              focusedBorder: OutlineInputBorder(
                borderRadius: BorderRadius.circular(10.0),
                borderSide: const BorderSide(
                    color: Color.fromARGB(255, 43, 45, 46), width: 1.0),
              ),
              errorBorder: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(10.0),
                  borderSide: const BorderSide(color: Colors.red, width: 1.0)),
              focusedErrorBorder: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(10.0),
                  borderSide: const BorderSide(color: Colors.red, width: 1.0)),
            ),
          ),
        ),
      ]),
    );
  }
}
