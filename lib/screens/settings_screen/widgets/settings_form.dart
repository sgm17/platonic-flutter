import 'package:flutter_gen/gen_l10n/app_localizations.dart';
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:platonic/providers/dialog_provider/providers.dart';
import 'package:platonic/providers/user_provider/providers.dart';
import 'package:platonic/screens/settings_screen/widgets/widgets.dart';

/* Frame settings_form
    Autogenerated by FlutLab FTF Generator
  */
class SettingsForm extends ConsumerWidget {
  const SettingsForm({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final userState = ref.watch(appUserProvider);

    void toggleUniversity() {
      ref.read(isMeetSettingsDialogProvider.notifier).state = true;

      Navigator.pushNamed(context, '/UniversityDialogScreen');
    }

    void toggleFaculty() {
      ref.read(isMeetSettingsDialogProvider.notifier).state = true;

      Navigator.pushNamed(context, '/FacultyDialogScreen');
    }

    return SizedBox(
      height: 178.0,
      child: Column(children: [
        const SizedBox(
          height: 25.0,
          child: StatusSwitch(),
        ),
        const SizedBox(
          height: 15.0,
        ),
        const SizedBox(
          height: 32.0,
          child: SexToMeet(),
        ),
        const SizedBox(
          height: 15.0,
        ),
        SizedBox(
          height: 38.0,
          child: SettingsSelect(
            placeholder: userState.universityToMeet != null &&
                    userState.universityToMeet!.name.isNotEmpty
                ? userState.universityToMeet!.name
                : AppLocalizations.of(context)!
                    .registerDetailMeetUniversityPlaceholderText,
            title: AppLocalizations.of(context)!
                .registerDetailMeetUniversityTtitle,
            toggleDialog: toggleUniversity,
          ),
        ),
        const SizedBox(
          height: 15.0,
        ),
        SizedBox(
          height: 38.0,
          child: SettingsSelect(
            placeholder: userState.facultiesToMeet != null &&
                    userState.facultiesToMeet!.isNotEmpty
                ? '${userState.facultiesToMeet!.first.facultyName} +${userState.facultiesToMeet!.length - 1}'
                : AppLocalizations.of(context)!
                    .registerDetailMeetFacultiesPlaceholderText,
            title:
                AppLocalizations.of(context)!.registerDetailMeetFacultiesTitle,
            toggleDialog: toggleFaculty,
          ),
        )
      ]),
    );
  }
}
